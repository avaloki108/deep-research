import { runVulnerabilityResearch } from '../vulnerability/vulnerability-research';

async function demoVulnerabilityResearch() {
  console.log('🚀 Demo: Vulnerability Research Engine\n');
  
  try {
    // Run a sample vulnerability research
    const report = await runVulnerabilityResearch('uniswap defi protocol vulnerabilities', {
      maxTargets: 5,
      focusOnBounties: true,
      includeContractAnalysis: false, // Skip for demo to avoid API limits
      minStars: 100
    });

    console.log('\n✅ Demo completed successfully!');
    console.log('📄 Sample report generated and saved to vulnerability-report.md');
    console.log('\n📊 Report Summary:');
    console.log('='.repeat(60));
    
    // Show first 500 characters of the report
    const preview = report.substring(0, 500);
    console.log(preview + '...\n');
    
    console.log('🎯 Key Features Demonstrated:');
    console.log('- ✅ Bug bounty platform integration');
    console.log('- ✅ GitHub repository discovery');
    console.log('- ✅ Target prioritization');
    console.log('- ✅ Risk assessment');
    console.log('- ✅ Comprehensive reporting');
    
    return true;
  } catch (error) {
    console.error('❌ Demo failed:', error);
    return false;
  }
}

if (require.main === module) {
  demoVulnerabilityResearch().then(success => {
    process.exit(success ? 0 : 1);
  });
}

export { demoVulnerabilityResearch };