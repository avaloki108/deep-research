import { runVulnerabilityResearch } from '../vulnerability/vulnerability-research';

async function demoVulnerabilityResearch() {
  console.log('ðŸš€ Demo: Vulnerability Research Engine\n');
  
  try {
    // Run a sample vulnerability research
    const report = await runVulnerabilityResearch('uniswap defi protocol vulnerabilities', {
      maxTargets: 5,
      focusOnBounties: true,
      includeContractAnalysis: false, // Skip for demo to avoid API limits
      minStars: 100
    });

    console.log('\nâœ… Demo completed successfully!');
    console.log('ðŸ“„ Sample report generated and saved to vulnerability-report.md');
    console.log('\nðŸ“Š Report Summary:');
    console.log('='.repeat(60));
    
    // Show first 500 characters of the report
    const preview = report.substring(0, 500);
    console.log(preview + '...\n');
    
    console.log('ðŸŽ¯ Key Features Demonstrated:');
    console.log('- âœ… Bug bounty platform integration');
    console.log('- âœ… GitHub repository discovery');
    console.log('- âœ… Target prioritization');
    console.log('- âœ… Risk assessment');
    console.log('- âœ… Comprehensive reporting');
    
    return true;
  } catch (error) {
    console.error('âŒ Demo failed:', error);
    return false;
  }
}

if (require.main === module) {
  demoVulnerabilityResearch().then(success => {
    process.exit(success ? 0 : 1);
  });
}

export { demoVulnerabilityResearch };